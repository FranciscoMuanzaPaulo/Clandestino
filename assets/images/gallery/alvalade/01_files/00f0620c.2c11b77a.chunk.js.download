"use strict";(self["b-property-web-property-page__LOADABLE_LOADED_CHUNKS__"]=self["b-property-web-property-page__LOADABLE_LOADED_CHUNKS__"]||[]).push([["00f0620c"],{"43bedd84":function(e,i,t){t.d(i,{p:function(){return n}});const n="Booking.com"},"0790c5dd":function(e,i,t){t.r(i),t.d(i,{default:function(){return L}});var n=t("ead71eb0"),r=t.n(n),o=t("dee2534d"),s=t("c44dcb0c"),_=t("abab1afe"),a=t("43bedd84"),u="f27525f602",l="c15f876bcc",d="af47b0a592";const c="WRITE_REVIEW_TRIGGER",m="ADD_BOOKING_SHEET",g="ADD_BOOKING_SHEET_OPEN",b="ADD_BOOKING_SHEET_CLOSE",v="ADD_BOOKING_SUBMIT",p="LOGGED_OUT_SHEET",w="LOGGED_OUT_SHEET_CLOSE",E="ERROR_ALERT",k="INPUT_BOOKING_NUMBER",f="INPUT_BOOKING_PIN";var O=e=>{let{isLoggedIn:i,loading:t,error:O,onCloseSheet:h,onOpenSheet:S,onLoginClicked:N,onSubmit:T,className:A}=e;const I=(0,s.useI18n)(),[L,C]=(0,n.useState)(!1),[D,B]=(0,n.useState)(!1),[y,x]=(0,n.useState)(""),[G,R]=(0,n.useState)(""),K=I.trans((0,_.t)("m_ugc_reviews_submission_cta_write_review")),P=I.trans((0,_.t)("m_ugc_reviews_submission_import_header")),U=I.trans((0,_.t)("m_ugc_reviews_submission_header_not_logged_in")),H=I.trans((0,_.t)("m_ugc_reviews_submission_pin_guide")),M=I.trans((0,_.t)("m_ugc_reviews_submission_subheader_not_logged_in",{variables:{b_companyname:a.p}})),W=I.trans((0,_.t)("m_ugc_reviews_submission_import_booking_num")),j=I.trans((0,_.t)("m_ugc_reviews_submission_import_booking_pin")),F=I.trans((0,_.t)("m_ugc_reviews_submission_cta_logged_in")),X=I.trans((0,_.t)("m_ugc_reviews_submission_login_cta")),q=I.trans((0,_.t)("m_ugc_reviews_submission_login_break")),z=I.trans((0,_.t)("m_ugc_reviews_submission_add_booking_")),J=I.trans((0,_.t)("m_ugc_reviews_submission_import_subheader",{variables:{b_companyname:a.p}})),V=e=>{"add_booking"===e&&(t||O||(x(""),R("")),C(!0)),"logged_out"===e&&B(!0),S&&S(e)},Z=e=>{"add_booking"===e&&(t||O||(x(""),R("")),C(!1)),"logged_out"===e&&B(!1),h&&h(e)};return r().createElement("div",{className:A},r().createElement(o.Button,{variant:"secondary",size:"medium",attributes:{"aria-label":"","data-testid":c},onClick:()=>V(i?"add_booking":"logged_out")},K),r().createElement(o.SheetContainer,{position:"center",closeAriaLabel:"",ariaLabel:P,title:P,active:L,onCloseTrigger:()=>Z("add_booking"),attributes:{"data-testid":m},closeAttributes:{"data-testid":b}},r().createElement("div",{className:l},r().createElement(o.Text,{variant:"body_2"},H),!t&&!!O&&r().createElement(o.Alert,{variant:"error",text:O,attributes:{"data-testid":E}}),r().createElement(o.InputText,{name:"bookingNumber",label:W,value:y,onChange:e=>{let{value:i}=e;return x(i)},inputAttributes:{"data-testid":k}}),r().createElement(o.InputText,{name:"bookingPin",label:j,className:d,value:G,onChange:e=>{let{value:i}=e;return R(i)},inputAttributes:{"data-testid":f}}),r().createElement(o.Button,{onClick:()=>{T({bookingNumber:y,bookingPin:G})},loading:t,attributes:{"data-testid":v}},F),r().createElement(o.Text,{variant:"small_1",color:"neutral_alt"},J))),r().createElement(o.SheetContainer,{position:"center",closeAriaLabel:"",ariaLabel:U,title:U,active:D,onCloseTrigger:()=>Z("logged_out"),attributes:{"data-testid":p},closeAttributes:{"data-testid":w}},r().createElement("div",{className:l},r().createElement(o.Text,{variant:"body_2"},M),r().createElement(o.Button,{onClick:N},X),r().createElement("div",{className:u,"aria-hidden":"true"},r().createElement(o.Divider,null),r().createElement(o.Text,null,q)),r().createElement(o.Button,{onClick:()=>V("add_booking"),variant:"secondary",attributes:{"data-testid":g}},z))))},h="e2ff5f735e",S="a65fe8a9ec",N=t("41c6c66e"),T=t("af1e2b38"),A=t("e36d8828");const I={m_ugc_reviews_submission_pin_blank_error:(0,_.t)("m_ugc_reviews_submission_pin_blank_error"),m_ugc_reviews_submission_booking_blank_error:(0,_.t)("m_ugc_reviews_submission_booking_blank_error"),m_ugc_reviews_submission_import_error:(0,_.t)("m_ugc_reviews_submission_import_error"),m_ugc_reviews_submission_expired_header:(0,_.t)("m_ugc_reviews_submission_expired_header"),m_ugc_reviews_submission_expired_message:(0,_.t)("m_ugc_reviews_submission_expired_message"),m_ugc_reviews_submission_generic_error:(0,_.t)("m_ugc_reviews_submission_generic_error")};var L=e=>{let{noAlign:i}=e;const[t,a]=(0,n.useState)(!1),[u,l]=(0,n.useState)(""),d=(0,s.useI18n)(),{isMDOT:c}=(0,T.Z6)(),m=(0,A.AW)(),g="undefined"!==typeof window&&window.B,b=d.trans((0,_.t)("m_ugcx_reviews_guest_header")),v=async e=>{var i,t,n,r;if(l(""),!e.bookingNumber.length)return l(d.trans(I.m_ugc_reviews_submission_booking_blank_error));if(!e.bookingPin.length)return l(d.trans(I.m_ugc_reviews_submission_pin_blank_error));const o=(null===g||void 0===g||null===(i=g.env)||void 0===i?void 0:i.b_secure_hostname)||(null===g||void 0===g||null===(t=g.env)||void 0===t?void 0:t.b_secure_domain),s=null===g||void 0===g||null===(n=g.env)||void 0===n?void 0:n.b_csrf_token,_=null===g||void 0===g||null===(r=g.env)||void 0===r?void 0:r.b_aid;if(o&&s&&_)try{var u,c,m;a(!0);const i=await fetch(o+"/get_review_invite_from_booking",{method:"post",credentials:"include",headers:{"X-Booking-AID":_,"X-Booking-CSRF":s,"Content-Type":"application/json"},body:JSON.stringify({bn:e.bookingNumber,pincode:e.bookingPin})}),t=await i.json();if(1===(null===t||void 0===t?void 0:t.success)){var b;const e=null===(b=t.data)||void 0===b?void 0:b.review_url;return void(e&&(window.location.href=e))}if(1===(null===t||void 0===t||null===(u=t.error)||void 0===u?void 0:u.booking_not_found))return l(d.trans(I.m_ugc_reviews_submission_import_error));if(1===(null===t||void 0===t||null===(c=t.error)||void 0===c?void 0:c.invitation_not_found))return l(d.trans(I.m_ugc_reviews_submission_expired_header));if(1===(null===t||void 0===t||null===(m=t.error)||void 0===m?void 0:m.invite_expired))return l(d.trans(I.m_ugc_reviews_submission_expired_message));l(d.trans(I.m_ugc_reviews_submission_generic_error))}catch(v){l(d.trans(I.m_ugc_reviews_submission_generic_error))}finally{a(!1)}else(0,N.reportSqueak)("ugcx_rl_write_review_missing_vars")},p=()=>{var e;const i=null===g||void 0===g||null===(e=g.env)||void 0===e?void 0:e.fe_login_page_accounts_portal_url;i&&(window.location.href=i)},w=()=>{var e;null===g||void 0===g||null===(e=g.trapFocus)||void 0===e||e.release(),l(""),a(!1)};return c?r().createElement("div",{className:S},r().createElement(o.Title,{variant:"headline_3",title:b}),r().createElement(O,{isLoggedIn:m,loading:t,error:u,onLoginClicked:p,onSubmit:v,onOpenSheet:w})):r().createElement(O,{isLoggedIn:m,loading:t,error:u,onLoginClicked:p,onSubmit:v,onOpenSheet:w,className:i?"":h})}}}]);
//# sourceMappingURL=https://istatic.booking.com/internal-static/capla/static/js/00f0620c.2c11b77a.chunk.js.map