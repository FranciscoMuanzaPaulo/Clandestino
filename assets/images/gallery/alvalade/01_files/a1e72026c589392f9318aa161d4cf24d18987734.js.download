var _i_=this._i_||function(){},_r_=this._r_||function(e){return e};_i_("a9a:c112e997"),B.define("hotel/utils/rooms-selected-copy",function(e){return _i_("a9a:861b63ef"),_r_(function(e,t){_i_("a9a:1c61f9f3");var o,n="<strong>"+t+"</strong>";switch(1<e.length?"0":e[0]||"0"){case"29":o="hp_book_now_summary_holidayhomes";break;case"31":o="hp_book_now_summary_villas";break;case"1":o="hp_book_now_summary_apartments";break;case"28":o="hp_book_now_summary_chalet";break;case"27":o="hp_book_now_summary_bungalow";break;case"26":o="hp_book_now_summary_dorm_beds";break;case"33":o="hp_book_now_summary_alt"}return _r_(o?B.jstmpl.translations(o,t,{b_count:n}):B.jstmpl.translations("hp_book_now_summary_room",t,{number_rooms:n}))})}),B.define("hotel/utils/rooms-selected-copy-us",function(e){return _i_("a9a:2a483aef"),_r_(function(e,t,o,n,i){_i_("a9a:99acef55");var r,a,_=t+"";switch(1<e.length?"0":e[0]||"0"){case"29":r="pd_rb_rt_us_exp_num_holiday_homes";break;case"31":r="pd_rb_rt_us_exp_num_villas";break;case"1":r="pd_rb_rt_us_exp_num_apartments";break;case"28":r="pd_rb_rt_us_exp_num_chalets";break;case"27":r="pd_rb_rt_us_exp_num_bungalows";break;case"26":r="pd_rb_rt_us_exp_num_dorm_beds"}a=r?B.jstmpl.translations(r,t,{b_count:_}):B.jstmpl.translations("pd_rb_rt_us_exp_num_rooms",t,{num:_});var s=B.jstmpl.translations("pd_rb_rt_us_exp_num_nights",o,{num:o}),l=B.jstmpl.translations("pd_rb_rt_us_exp_num_adults",n,{num:n});if(i){var c=B.jstmpl.translations("pd_rb_rt_us_exp_num_children",i,{num:i});return _r_(B.jstmpl.translations("pd_rb_rt_us_exp_num_nights_adults_children_rooms",null,{pd_rb_rt_us_exp_num_nights:s,pd_rb_rt_us_exp_num_adults:l,pd_rb_rt_us_exp_num_children:c,pd_rb_rt_us_exp_num_rooms:a}))}return _r_(B.jstmpl.translations("pd_rb_rt_us_exp_num_nights_adults_rooms",null,{pd_rb_rt_us_exp_num_nights:s,pd_rb_rt_us_exp_num_adults:l,pd_rb_rt_us_exp_num_rooms:a}))})}),B.define("component/hotel/new-rooms-table/lightbox",function(e,t,o){_i_("a9a:6465e895");var n=e("component"),p=e("et"),u=e("jquery"),b=e("lightbox"),c=e("events"),h=B.require("ga-tracker"),d=e("hotel/rooms_table/lightbox/gallery"),s=e("querystring"),f=e("server-data"),l=e("hotel/new-rooms-table/c360"),i={},r=0,a=!1,_=!1,m=!1,v={},g={caplaRoomPageExpHash:"aaOYWbOTESCWIKdFHaO"},k={ON_RT_VIEW:1,ON_RP_OPEN:2,ON_RP_OPEN_WITH_AVAIL:3};function y(t){return _i_("a9a:8ccdb64a"),_r_(f.b_rooms_available_and_soldout.find(function(e){return _i_("a9a:53ec990b"),_r_(e.b_id===t)}))}function C(e){if(_i_("a9a:d56aeb29"),(!a||!_||!m)&&e.data("room-id")){var t="RD"+e.data("room-id");i[t]?i[t]+=1:(i[t]=1,r+=1,a||(p.goal("hp_rt_roomtype_lightbox_opened"),p.stage("aaAJYBVaAJDbAHIDJNMTKe",1),p.stage("aaAJYBVaAJDbAPQfQOHT",1),p.stage("aaAJYBVaAJDbAHIDJNMTKe",2),p.stage("aaAJYBVaAJDbAPQfQOHT",2),a=!0)),!_&&1<i[t]&&(p.goal("hp_lightbox_opened_more_than_once"),_=!0),!m&&1<r&&(p.goal("hp_lightbox_opened_for_different_rooms"),m=!0)}_r_()}function x(t,e){_i_("a9a:510011c6");var o=t.data("room-id"),n=y(Number(o)),i=Boolean(n&&n.b_blocks&&1===n.b_blocks.length),r=Boolean(f&&f.fe_has_group_recommendation_for_rt),a=Boolean(f&&f.b_group_children);if(p.stage(g.caplaRoomPageExpHash,k.ON_RP_OPEN),(i||r)&&p.stage(g.caplaRoomPageExpHash,k.ON_RP_OPEN_WITH_AVAIL),p.track(g.caplaRoomPageExpHash)&&!i&&!r&&!a)return _r_(!0);var _,s={customWrapperClassName:"hprt-lightbox--wrapper hprt-lightbox--two_column_layout hprt-lightbox--wrapperwider",bOverflowVisible:!0,position:"dynamic",hideCallBack:(_=t,_i_("a9a:42fc8c66"),_r_(function(){_i_("a9a:f1956745");var e=_.data("room-id"),t=u("[name=RD"+e+"]").parents(".hprt-table-cell").first();if(!B.feature||!B.feature.transition||!B.env.b_has_maxotel_rooms)return _r_();if(!t.length)return _r_();var o=_.data("LightboxGallery");o&&o.pauseSlick&&o.pauseSlick(),h.trackEvent(h.hotelPageTracker,"Hotel: Lightbox closed","Click on close button"),location.hash="_",_r_()})),trapFocus:!0};b.show(t,s);var l=t.data("room-id"),c="room_"+l;location.hash=c;var d=t.find('[data-component="room-lightbox-async"]');d.data("RoomLightboxEventsBinded")||(d.data("RoomLightboxEventsBinded",!0),B.events.on(B.hotel.Events.RT.LIGHTBOX_LOADED_ASYNC,function(e){_i_("a9a:eede5d9b"),l==e.roomId&&e.success&&(w(t),b.rePosition(),setTimeout(function(){_i_("a9a:e05bf8ef"),b.rePosition(),_r_()},250)),_r_()})),d.length?d.first().component("room-lightbox-async").load():w(t),_r_()}function w(e){_i_("a9a:41c77468");var t,o=e.data("room-id"),n=e.find(".hprt-lightbox-gallery-container");if(function(e){_i_("a9a:1c37975d");var t=y(e);if(t){var o={hotel_id:B.env.b_hotel_id,room_id:e},n={roomtype_id:Number(t.b_roomtype_id),propertytype_id:Number(B.env.b_acc_type||0)};Object.assign(o,n),u.ajax({method:"POST",dataType:"json",url:"/hotel_lightbox_opened",data:o})}_r_()}(o),n.length&&!n.hasClass("slicked")){n.addClass("slicked"),t=new d(n),e.data("LightboxGallery",t),n.find('[data-gallery=""]').one("click.tracking",function(){_i_("a9a:e62b85de"),p.goal("hp_lb_gallery_clicks_photo"),_r_()});var i=n.find(".hp-gallery-control");i.on("click.tracking",function(e){_i_("a9a:68353176"),Object.prototype.hasOwnProperty.call(e,"originalEvent")&&(p.goal("hp_lb_gallery_clicks_arrows"),i.off("click.tracking")),_r_()}),n.find("a.js-hotel-thumb").one("mouseenter.tracking click.tracking",function(){_i_("a9a:ccce1eb9"),p.goal("hp_lb_gallery_used_thumbs"),_r_()}),C(e)}else(t=e.data("LightboxGallery"))&&t.playSlick&&t.playSlick(),n.length&&C(e);var r=e.find(".inline-feedback_lightbox");if(r.length){var a=0<e.find(".b-button_primary").length,_=parseInt(r.data("opened_count"));_?_+=1:_=1,r.data("opened_count",_),(2<_||!a)&&r.removeClass("g-hidden")}c.off("feedbackInline:close_lightbox").on("feedbackInline:close_lightbox",j),c.trigger(B.hotel.Events.RT.LIGHTBOX_OPEN_NEW,o,e);var s=u('a.hprt-roomtype-link[href="#RD'+o+'"]');if(0<s.length){var l=s.data("room-name");l&&h.trackEvent(h.hotelPageTracker,"Hotel: Lightbox opened",l)}setTimeout(function(){_i_("a9a:a0bb6789");try{if("undefined"!=typeof window&&"function"==typeof window.dispatchEvent&&"undefined"!=typeof document&&"function"==typeof document.createEvent){var e=document.createEvent("CustomEvent");e.initEvent("scroll",!1,!1),window.dispatchEvent(e)}}catch(e){}_r_()},100),_r_()}function j(){_i_("a9a:4fb8ca4d"),b.hide(),_r_()}o.exports=n.extend({init:function(e){_i_("a9a:68aedfe5");var o=this.$el,n=o.data("room-id");setTimeout(function(){_i_("a9a:e2ea9c6a"),function(e){_i_("a9a:c71d4121");var t=e.data("room-id"),o=s.parseUrl(location.href).query.activeTab;if(1==location.hash.indexOf("room")&&(o=location.hash.slice(1)),!o)return _r_();var n=o.match(/room_([0-9]*)_?.*/);if(!n||n.length<2||!n[1])return _r_();t==n[1]&&x(e),_r_()}(o),_r_()},500);var t=u('.hprt-roomtype-link[data-room-id="'+n+'"]');if(!t.length)return _r_();t.click(function(e){var t;_i_("a9a:b65dc857"),e.preventDefault(),f&&f.b_room_comparison_tracking_data&&f.b_room_comparison_tracking_data.first_room_id===n&&p.goalWithValue("js_rt_comparison_first_room_page_opened_total",1),f&&f.b_room_comparison_tracking_data&&f.b_room_comparison_tracking_data.second_room_id===n&&p.goalWithValue("js_rt_comparison_second_room_page_opened_total",1),v[n]?p.customGoal("ZdfbTZCCQJBHVPSDDKe",4):0<Object.keys(v).length&&p.customGoal("ZdfbTZCCQJBHVPSDDKe",5),p.stage("EKESIJNGdLOLOLOCXSWAbDPfRe",2),v[n]=1,t=n,_i_("a9a:b7fe7be2"),l.track(l.actions.rpTrigger,{roomID:t}),_r_(),x(o),_r_()});var i=u(".gr-toggle-room-lightbox");if(i.length)for(var r=0;r<i.length;r++)t.attr("href")===u(i[r]).attr("href")&&u(i[r]).bind("click",function(e){_i_("a9a:b20c48b2"),e.preventDefault(),x(o),_r_()});var a=u(".main-gallery-toggle-room-lightbox");if(a.length)for(var _=0;_<a.length;_++)t.data("roomId")===u(a[_]).data("roomId")&&u(a[_]).bind("click",function(e){_i_("a9a:7d6ceceb"),e.preventDefault(),x(o,u(this).data("isGroupRecommendation")),_r_()});_r_()},show:x}),_r_()}),B.define("component/hotel/new-rooms-table/summary/best-price",function(e,t,o){_i_("a9a:c3444c52");var n=e("component"),i=e("hotel/store"),r=e("jstmpl"),a=/^bbasic_/i,_=e("et");o.exports=n.extend({init:function(){_i_("a9a:8879f9c7"),i.subscribe(function(){if(_i_("a9a:f787ecd1"),_.track_experiment("d_pd_hp_rt_remove_jackpot_step3"))return _r_();var e=i.getState().roomsTable.js_selection,t=$(".hp_rt_attr_msg");1==B.env.b_is_group_search?2==e.fitStatus?this.toggleJackpotMessage(e,t):this.$el.hide():this.toggleJackpotMessage(e,t),_r_()}.bind(this)),_r_()},toggleJackpotMessage:function(e,t){_i_("a9a:b47aa7ec");var o=a.test(e.blockIDs[0]||"");if(1!=e.roomCount||2!=e.blocks[e.blockIDs[0]].b_stay_prices.length||o)0<e.roomCount?(this.$el.text(B.jstmpl.translations("hp_rt_jackpot_best_price")),this.$el.show(),t.length&&t.show()):(this.$el.hide(),this.$el.text(""),t.length&&t.hide());else{var n="",i=e.roomTypes[0];-1!==["1","29","31","17","19","26"].indexOf(i)?(n="1"===i?r.translations("pss_rt_jackpot_last_room_dehotelise_apt"):"29"===i?r.translations("pss_rt_jackpot_last_room_dehotelise_hh"):"31"===i?r.translations("pss_rt_jackpot_last_room_dehotelise_villa"):r.translations("pss_rt_jackpot_last_room_dehotelise_option"),this.$el.text(n)):this.$el.text(B.jstmpl.translations("hp_rt_jackpot_last_room")),this.$el.show(),t.length&&t.show()}_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/no-free-cancellation",function(e,t,o){_i_("a9a:015c4af4");var n=e("component"),s=e("hotel/store");o.exports=n.extend({init:function(){_i_("a9a:e9ce80a4"),s.subscribe(function(){_i_("a9a:fd37aecf");var e,t,o,n="hu"===B.env.b_guest_country,i=s.getState().roomsTable.js_selection,r=i.blockIDs.reduce(function(e,t){return _i_("a9a:4b0072e8"),"non_refundable"===i.blocks[t].b_cancellation_type?_r_(e+1):_r_(e)},0),a=$(".js-hprt__booking-summary__non-free-wrapper"),_=i.blockIDs.reduce(function(e,t){return _i_("a9a:76b7c3bd"),"special_condition"===i.blocks[t].b_cancellation_type?_r_(e+1):_r_(e)},0);0<r||0<_?(n?(e=B.jstmpl.translations("tpex_hu_no_fc_warning_body"),t=B.jstmpl.translations("tpex_hu_no_fc_warning_body_some"),o=B.jstmpl.translations("tpex_hu_no_fc_warning_body_none")):(e=B.jstmpl.translations("bhep_pp_droom_no_free_cancellation_warning_body"),t=B.jstmpl.translations("bhep_pp_droom_no_free_cancellation_warning_body_many_non_free_with_free"),o=B.jstmpl.translations("bhep_pp_droom_no_free_cancellation_warning_body_many_non_free")),a.removeClass("g-hidden"),1===i.roomCount?this.$el.html(e):i.blockIDs.length-r-_!=0?this.$el.html(t):this.$el.html(o),$(".continue_header").removeClass("g-hidden"),this.$el.removeClass("g-hidden")):($(".continue_header").addClass("g-hidden"),this.$el.addClass("g-hidden"),a.addClass("g-hidden")),_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/conditions",function(e,t,o){_i_("a9a:47c11826");var n=e("component"),r=e("et"),i=e("jstmpl"),a=e("hotel/store"),_=/^bbasic_/i;o.exports=n.extend({init:function(){_i_("a9a:74754c89"),a.subscribe(function(){_i_("a9a:18508ee9");var e=a.getState().roomsTable.js_selection,t=e.blockIDs[0]||"";if(1!==e.roomCount||e.blocks[t].b_is_fflex_price_point||_.test(t))1<e.roomCount&&!e.blocks[t].b_is_fflex_price_point&&!_.test(t)&&e.text_benefits&&e.text_benefits.length&&r.track("AEUaYPZZGbdUDXFZMXNOABOfWHT")?this.$el.empty().append(this.generateVMFBenefits(e)):this.$el.empty();else{var o=$('tr[data-block-id="'+t+'"]').find(".hprt-conditions-bui").eq(0),n=e.blocks[t].b_genius_free_room_upgrade,i=this.generateConditionsEl(o,n);this.$el.empty().append(i),window.BUI&&window.BUI.initComponents&&window.BUI.initComponents(this.$el.get(0))}_r_()}.bind(this)),_r_()},generateConditionsEl:function(e,t){_i_("a9a:2b226783");var o=e.clone();o.removeClass("hprt-conditions").addClass("hprt-conditions-summary"),o.find(".jq_tooltip").removeClass("jq_tooltip").removeAttr("data-title title"),o.find(".green_condition").removeClass("green_condition"),o.find(".bui_color_constructive").removeClass("bui_color_constructive"),o.find(".hprt-green-condition").removeClass("hprt-green-condition"),o.find(".ungreen-condition-green").removeClass("ungreen-condition-green"),o.find(".hprt-item--emphasised").removeClass("hprt-item--emphasised"),o.find(".hprt-checkmark-condition").removeClass("hprt-checkmark-condition"),o.find(".hprt-special-condition").removeClass("hprt-special-condition"),o.find("svg.hprt-nocc-icon").attr("fill","#383838"),o.find(".bui-text--color-constructive").removeClass("bui-text--color-constructive"),o.find("svg.bk-icon").attr("fill","#262626"),o.find(".hprt-rate-included-title").remove(),t&&o.find(".room-upgrade-condition").removeClass("u-hidden");var n=$("<strong>"+B.jstmpl.translations("bp_res_column_details")+"</strong>");return _r_([n,o])},generateVMFBenefits:function(e){_i_("a9a:6eaea74d");var t=$(i("vmf_text_benefits").render({cmp_benefits:e.text_benefits})),o=$('<ul class="hprt-conditions-bui bui-list bui-list--text bui-list--icon bui-f-font-caption hprt-conditions-summary"></ul>');return o.append(t),_r_([$("<strong>"+B.jstmpl.translations("bp_res_column_details")+"</strong>"),o])}}),_r_()}),booking.jstmpl("vmf_text_benefits",function(){_i_("a9a:25214fb1");var _,s=["\n    ",'\n        <li class="bui-list__item js-vmf-text-benefit-element">\n            <span class="bui-list__icon" role="presentation">\n                ',"16",'\n            </span>\n            <div class="bui-list__body">\n                <div class="bui-list__description" data-program-id="','">\n                    <span>',"</span>\n                </div>\n            </div>\n        </li>\n    ","\n"],l=["cmp_benefits"];return _r_(function(e){_i_("a9a:a6130db0");var t="",o=this.fn;t+=s[0];var n=o.MC(l[0])||[];e.unshift({text_benefit:null});for(var i,r=1,a=n.length;r<=a;r++)e[0].text_benefit=i=n[r-1],t+=[s[1],(e.unshift({name:o.MG((i||{}).icon),width:s[2]}),_=o.HELPER("icon",e[0]),e.shift(),_),s[3],o.F.entities((i||{}).id),s[4],o.F.entities((i||{}).name),s[5]].join("");return e.shift(),t+=s[6],_r_(t)})}()),B.define("component/hotel/new-rooms-table/reservation-cta",function(e,t,o){_i_("a9a:fea66399");var n=e("component"),a=e("hotel/store"),_=e("server-data");o.exports=n.extend({init:function(){_i_("a9a:d0bbc7f8");var i=this.$el.find(".js-reservation-button"),e=i.find(".js-reservation-button__text"),r=e.length?e:i;window.addEventListener("pageshow",function(e){_i_("a9a:35ea02c4"),e.persisted&&i.removeClass("bui-is-loading").prop("disabled",!1),_r_()}),a.subscribe(function(){_i_("a9a:808cee92");var e=a.getState().roomsTable,t=e.js_selection,o=t.blockIDs.some(function(e){return _i_("a9a:619f830f"),_r_(t.blocks[e].b_rate_is_genius)});e.formIsSuccessfullySubmitted?i.addClass("bui-is-loading").prop("disabled",!0):i.removeClass("bui-is-loading").prop("disabled",!1);var n=t.blockIDs.filter(function(e){return _i_("a9a:1ab254b5"),_r_(t.blocks[e].b_genius_free_room_upgrade)});_.fe_is_an_rtb_property?r.html(B.jstmpl.translations("web_rtb_rt_request_cta")):n.length&&n.length===t.blockIDs.length?r.html(B.jstmpl.translations("genius_free_room_upgrade_rt_cta")):o?r.html(B.jstmpl.translations("ge_deepen_rt_book_genius_cta")):r.html(B.jstmpl.translations("hp_rt_book_button_reserve")),_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/dont-worry",function(e,t,o){_i_("a9a:70e9a9fd");var n=e("component");o.exports=n.extend({init:function(){if(_i_("a9a:e187fbe1"),this.$el.data("alwaysVisible"))return this.$el.text(B.jstmpl.translations("bp_dont_worry_message")),_r_();var o=e("hotel/store");o.subscribe(function(){_i_("a9a:202db018");var t=o.getState().roomsTable.js_selection,e=t.blockIDs.every(function(e){return _i_("a9a:152e49a4"),_r_(t.blocks[e].b_book_now_pay_later)});0<t.roomCount&&e?this.$el.text(B.jstmpl.translations("bp_dont_worry_message")):this.$el.text(""),_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/fade",function(e,t,o){_i_("a9a:6a3dab13");var r=e("server-data"),a=e("jquery"),n=e("component"),_=e("hotel/store"),s="hprt-block--genius-room-selected",l="hprt-block--room-selected";o.exports=n.extend({init:function(){_i_("a9a:e8209eae"),_.subscribe(function(){_i_("a9a:30e74349");var t=_.getState().roomsTable.js_selection;this.$el.removeClass(l),this.$el.removeClass(s),0<t.roomCount&&(t.blockIDs.some(function(e){return _i_("a9a:e11750d1"),_r_(1===t.blocks[e].b_rate_is_genius)})&&1===parseInt(r.brand_selected_rooms_genius)?this.$el.addClass(s):this.$el.addClass(l));var e=".roomType--highlight",o=a(".hprt-table").find(".hprt-table-cell.-first");if(o.length&&o.filter(e).length){var n=o.filter(e).find("[name^=RD]");if(n&&n.length&&t.roomIDs&&t.roomIDs.length){var i=n.attr("name").replace("RD","");i&&-1==t.roomIDs.indexOf(i)&&o.removeClass("roomType--highlight hprt-table-cell-roomtype--active")}}_r_()}.bind(this)),_r_()}}),_r_()}),booking.jstmpl("template_reserve_button_tooltip",function(){_i_("a9a:517e5219");var a,_=["\n    <div class='big_tooltip_x'>\n        <h1>","</h1>\n\n        <p>\n            <strong>\n                ","\n                    ",", ","\n                ","\n            </strong>\n            <br />\n        </p>\n\n        <hr/>\n\n        <p>\n            <strong>"," \n                    ","/private/bh_bp_dates_num_weeks/name","/private/bp_dates_num_nights_1/name","","</strong><br />\n        </p>\n\n        <p>\n            ","/private/check_in/name",": </span>","\n        </p>\n\n        <p>\n            ","/private/check_out/name","\n        </p>\n    </div>\n\n    \n    ","\n\n    ",'\n        <div class="big_tooltip_message">\n            ',"/private/genius_free_room_upgrade_rt_applied/name","\n            ","/private/rtb_pp_persuasion_aria_yellow_block/name","/private/ge_boost_hp_rt_reserve_button_hover_nongenius/name","/private/hp_rt_reserve_hover_no_account_2_minutes/name","\n        </div>\n    ","\n        ",'\n            <div class="big_tooltip_message big_tooltip_message__green pay_later">\n                ',"/private/hp_rt_pay_at_property/name","\n            </div>\n        ","\n    ","\n\n"],s=["b_hotel_name","b_room_details","b_name","b_interval_in_weeks","b_interval","b_checkin_localized_date_with_weekday","b_checkout_localized_date_with_weekday","b_only_genius_room_upgrade_selected","b_show_great_choice_message","b_user_auth_level","fe_is_an_rtb_property","fe_show_tooltip_persuasion_block","b_all_rooms_have_pay_later","b_is_lightbox"];return _r_(function(e){_i_("a9a:f30c7fcc");var t="",o=this.fn;t+=[_[0],o.F.html(o.MC(s[0])),_[1]].join("");var n=o.MC(s[1])||[];e.unshift(null);for(var i=1,r=n.length;i<=r;i++)e[0]=n[i-1],t+=[_[2],o.F.html(o.MC(s[2]))].join(""),o.MJ(i==n.length)||(t+=_[3]),t+=_[4];return e.shift(),t+=_[5],o.MD(s[3])?t+=[_[6],(e.unshift({num_weeks:o.MC(s[3])}),a=o.ME(_[7],o.MB,o.MN,o.MO(o.MC(s[3]),null,_[7])),e.shift(),a),_[4]].join(""):t+=[_[2],(e.unshift({num_nights:o.MC(s[4])}),a=o.ME(_[8],o.MB,o.MN,o.MO(o.MC(s[4]),null,_[8])),e.shift(),a),_[9]].join(""),t+=[_[10],o.ME(_[11],o.MB,o.MN,null),_[12],o.MC(s[5]),_[13],o.ME(_[14],o.MB,o.MN,null),_[12],o.MC(s[6]),_[15]].join(""),o.MN("fe_show_tooltip_persuasion_block",o.MC(s[7])&&o.MC(s[8])||o.MC(s[9])&&o.MC(s[8])||o.MK(o.MC(s[7])||o.MC(s[9]))),t+=_[16],o.MD(s[11])&&(t+=_[17],o.MD(s[7])?(t+=_[4],o.MD(s[8])&&(t+=[_[2],o.ME(_[18],o.MB,o.MN,null),_[4]].join("")),t+=_[19]):o.MD(s[10])?t+=[_[4],o.ME(_[20],o.MB,o.MN,null),_[19]].join(""):(o.MD(s[9])?(t+=_[4],o.MD(s[8])&&(t+=[_[2],o.ME(_[21],o.MB,o.MN,null),_[4]].join(""))):(t+=_[4],o.MJ(o.track_experiment("dDfPJeaILYDCMMWZNKdPYOWdDC"))?t+=[_[2],o.ME(_[21],o.MB,o.MN,null),_[4]].join(""):t+=[_[2],o.ME(_[22],o.MB,o.MN,null),_[4]].join("")),t+=_[19]),t+=_[23]),t+=_[16],o.MK(o.MC(s[13]))&&(t+=_[24],o.MD(s[12])&&(t+=[_[25],o.ME(_[26],o.MB,o.MN,null),_[27]].join("")),t+=_[28]),t+=_[29],_r_(t)})}()),B.define("hotel/rooms-table/reserve-button-tooltip",function(e){_i_("a9a:c2923bb0");var t=e("jquery"),_=e("hotel/store"),s=t(".js-reservation-button"),l=s.attr("data-title"),c=B.jstmpl("template_reserve_button_tooltip"),d={};_.subscribe(function(){_i_("a9a:93932bc8");var t=_.getState().roomsTable.js_selection,e=t.roomIDs.map(function(e){return _i_("a9a:1285ba3b"),_r_(t.rooms[e])}),o=t.blockIDs.filter(function(e){return _i_("a9a:434aeffc"),_r_(t.blocks[e].b_genius_free_room_upgrade)}),n=o.length&&o.length===t.blockIDs.length;s.removeAttr("id").removeAttr("data-tooltip-class"),s.removeData("materialized-id");var i=t.fitStatus,r=Boolean(0===i&&1===Number(B.env.fe_show_fam_d_hp_rt_great_choice_no_fit_blackout));if(0<t.roomCount){d={b_hotel_name:B.env.b_hotel_name,b_interval:B.env.b_checkin_checkout_interval,b_interval_in_weeks:B.env.b_checkin_checkout_interval_in_weeks,b_checkin_localized_date_with_weekday:B.formatter.date(B.env.b_checkin_date,"date_with_weekday"),b_checkout_localized_date_with_weekday:B.formatter.date(B.env.b_checkout_date,"date_with_weekday"),b_check_in_time_translated:B.env.b_check_in_time_translated,b_check_out_time_translated:B.env.b_check_out_time_translated,b_room_details:e,b_user_auth_level:B.env.auth_level,b_only_genius_room_upgrade_selected:n,b_show_great_choice_message:!r,fe_is_an_rtb_property:B.env.fe_is_an_rtb_property};var a=c.render(d);s.attr("data-title",a).attr("data-tooltip-class","submit_holder_button_tooltip")}else d={},s.attr("data-title",l);_r_()}),_r_()}),B.define("component/hotel/new-rooms-table/summary/rooms",function(e,t,o){_i_("a9a:76f7d781");var n=e("component"),s=e("hotel/utils/rooms-selected-copy"),i=e("hotel/store"),l=e("server-data"),c=e("et"),d=e("jstmpl"),r=e("search-config"),a=e("hotel/redux/actionTypes");o.exports=n.extend({init:function(){_i_("a9a:2c17327a");var e={};i.subscribe(function(){_i_("a9a:fdc40932");var t=i.getState().roomsTable.js_selection;0<t.roomCount?1<t.roomCount&&!(t.blockIDs[0]&&t.blockIDs[0].startsWith&&t.blockIDs[0].startsWith("bbasic_"))?t.is_total_price_calculation_loading||JSON.stringify(e)===JSON.stringify(t.blockCountPerBlockID)||($("#total_price_spinner").length||this.$el.find(".hprt-reservation-total-price").parent().append('<div aria-label="Label" id="total_price_spinner" class="bui-spinner bui-spinner--size-small" role="alert" aria-busy="true" style="margin-left:5px"><div class="bui-spinner__inner"></div></div>'),i.dispatch({type:a.SET_TOTAL_PRICE_LOADING,payload:!0}),B.require("fragment").call("hotel.total_price",{hotel_id:l.b_hotel_id,search_config:r.getRawValue(),checkin:l.b_checkin_date,checkout:l.b_checkout_date,selected:t.blockCountPerBlockID,selected_blocks:t.blockIDs}).then(function(e){if(_i_("a9a:4b9349eb"),1===i.getState().roomsTable.js_selection.roomCount)return _r_();i.dispatch({type:a.SET_TOTAL_PRICE_LOADING,payload:!1}),e&&e.total_price?this.renderFromBE(t,e):this.renderFromFEState(t),_r_()}.bind(this),function(e){_i_("a9a:b6963118"),i.dispatch({type:a.SET_TOTAL_PRICE_LOADING,payload:!1}),this.renderFromFEState(t),_r_()}.bind(this))):this.renderFromFEState(t):this.$el.hide(),e=t.blockCountPerBlockID,_r_()}.bind(this)),_r_()},renderFromFEState:function(e){if(_i_("a9a:4a94b476"),1===e.roomCount?c.stage("AEUaYPZZGbdUSPHIcNLbeTQHFHDQIC",3):c.stage("AEUaYPZZGbdUSPHIcNLbeTQHFHDQIC",4),c.track("AEUaYPZZGbdUSPHIcNLbeTQHFHDQIC")){this.$el.empty();var t=s(e.roomTypes,e.roomCount),o="";if(0<e.totalPriceBeforeDiscount){var n=B.env.b_checkin_checkout_interval||1;0===n&&(n=1),o=B.jstmpl.translations("prd_sr_card_price_times_nights",null,{num_nights:n,amount_with_currency:B.utils.accounting.formatMoney(e.totalPriceBeforeDiscount/n)})}var i=$(d("price_display_hp_rt_total_price").render({room_type_copy:t,total_price:e.totalPriceFormatted,has_discount:Boolean(e.totalPriceBeforeDiscount),all_discounts:e.all_discounts||[],before_discount_copy:o,total_price_before_discount:e.totalPriceBeforeDiscountPretty,is_rtb_property:Boolean(l.fe_is_an_rtb_property),total_price_raw:e.totalPrice}));this.$el.append(i),window.BUI.initComponents($(this.$el).get(0))}else{var r="hprt-reservation-total-price bui-price-display__value",a="",_="";0<e.totalPriceBeforeDiscount&&(a=' <div class="js-hp-rt-total-strikethrough bui-f-color-destructive prco-f-text-line-through prco-f-font-body prco-inline-block-maker-helper">'+e.totalPriceBeforeDiscountPretty+"</div>&nbsp;",r+=" prco-inline-block-maker-helper"),_='<div style="display:flex;align-items:center">'+a+'<div class="'+r+'">'+e.totalPriceFormatted+"</div>",l.fe_is_an_rtb_property&&(_+='<input type="hidden" name="source_price" value="'+e.totalPrice+'" />'),this.$el.html(s(e.roomTypes,e.roomCount)+" "+_)}this.$el.find(".hprt-reservation-total-price").one("mouseenter",function(){_i_("a9a:80b132c5"),B.et.goal("desktop_room_list_total_column_hover_over_price"),_r_()}),0<e.totalPriceBeforeDiscount&&this.$el.find(".js-hp-rt-total-strikethrough").one("mouseenter",function(){_i_("a9a:89c251cb"),B.et.goal("desktop_room_list_total_column_hover_over_strikethrough"),_r_()}),this.$el.show(),_r_()},renderFromBE:function(e,t){_i_("a9a:752b058e");var o='<div style="display:flex;align-items:center">'+function(e){if(_i_("a9a:9d5077b8"),isNaN(e)||e<=0||!c.track("eDdeFCYAAFUTUeECdRJJRbaTaTaBKHYaRXUbZFLMZGHCTRdIGHT"))return _r_("");var t=B.utils.accounting.formatMoney(e,{precision:0});return _r_(' <div class="js-hp-rt-total-strikethrough bui-f-color-destructive prco-f-text-line-through prco-f-font-body prco-inline-block-maker-helper">'+t+"</div>&nbsp;")}(t.total_price_without_discount)+'<div class="'+function(e){_i_("a9a:b1652e2e");var t="hprt-reservation-total-price bui-price-display__value";if(isNaN(e)||e<=0||!c.track("eDdeFCYAAFUTUeECdRJJRbaTaTaBKHYaRXUbZFLMZGHCTRdIGHT"))return _r_(t);return _r_(t+" prco-inline-block-maker-helper")}(t.total_price_without_discount)+'">'+B.utils.accounting.formatMoney(t.total_price,{precision:0})+"</div></div>";this.$el.html(s(e.roomTypes,e.roomCount)+" "+o),this.$el.show(),i.dispatch({type:a.SET_TOTAL_PRICE_CHARGES,payload:Math.round(t.total_charges)}),_r_()}}),_r_()}),booking.jstmpl("price_display_discount_breakdown",function(){_i_("a9a:25e380b2");var _=["\n    <div>\n        ",'\n            <div class="bui-grid">\n                <div class="bui-grid__column-7">\n                    <div class="bui-f-font-body prco-pop-breakdown-element">\n                        ','\n                    </div>\n                </div>\n\n                <div class="bui-grid__column-5">\n                    <div class="bui-f-font-body prco-pop-breakdown-element prco-text-nowrap-helper bui-u-text-right">\n                        ',"\n                    </div>\n                </div>\n            </div>\n\n            ",'\n                <div class="bui-grid">\n                    <div class="bui-grid__column-7">\n                        <div class="prco-pop-breakdown-element">\n                            <div class="bui-f-font-body">\n                                ','\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="bui-grid__column-5">\n                        <div class="bui-f-font-body prco-pop-breakdown-element prco-text-nowrap-helper bui-u-text-right">\n                            -&nbsp;',"\n                        </div>\n                    </div>\n                </div>\n\n                ",'\n                    <div class="bui-f-font-caption bui-f-color-grayscale bui-spacer--medium">\n                        ',"\n                    </div>\n                ","\n            ",'\n\n            \n            <div class="prco-pop-breakdown-element">\n                <hr class="bui-divider bui-divider--light" />\n            </div>\n        ','\n\n        <div class="bui-grid">\n            <div class="bui-grid__column-7">\n                <div class="bui-f-font-strong prco-pop-breakdown-element">\n                    ',"/private/sr_pd_breakdown_total/name",'\n                </div>\n            </div>\n\n            <div class="bui-grid__column-5">\n                <div class="bui-f-font-strong prco-pop-breakdown-element prco-text-nowrap-helper bui-u-text-right">\n                    ',"\n                </div>\n            </div>\n        </div>\n    </div>\n"],s=["before_discount_copy","total_price_before_discount","all_discounts","total_price"];return _r_(function(e){_i_("a9a:52007ef0");var t="",o=this.fn;if(t+=_[0],o.MJ(o.array_length(o.MB(s[2])))){t+=[_[1],o.MC(s[0]),_[2],o.MC(s[1]),_[3]].join("");var n=o.MC(s[2])||[];e.unshift({rate_discount:null});for(var i,r=1,a=n.length;r<=a;r++)e[0].rate_discount=i=n[r-1],t+=[_[4],o.F.entities((i||{}).b_copy),_[5],(i||{}).b_value_user_currency,_[6]].join(""),o.MJ(o.MG((i||{}).b_copy_alt))&&(t+=[_[7],o.F.entities((i||{}).b_copy_alt),_[8]].join("")),t+=_[9];e.shift(),t+=_[10]}return t+=[_[11],o.ME(_[12],o.MB,o.MN,null),_[13],o.MC(s[3]),_[14]].join(""),_r_(t)})}()),booking.jstmpl("price_display_hp_rt_total_price",function(){_i_("a9a:46699b97");var t,_=["\n    <div\n        ",'\n            aria-hidden="true"\n            data-bui-component="Popover"\n            data-popover-position="top"\n            tabindex="0"\n            data-popover-z-index="1002"\n            data-popover-content-id="hp-rt-reservation-summary-discount-breakdown-js"\n        ',"\n    >\n        <div>\n            ","\n        </div>\n        <div>\n            ",'\n                <div class="js-hp-rt-total-strikethrough bui-f-color-destructive prco-f-text-line-through prco-f-font-body prco-inline-block-maker-helper">\n                    ',"\n                </div>\n            ",'\n            <div class="hprt-reservation-total-price bui-price-display__value'," prco-inline-block-maker-helper",'">\n                ',"\n            </div>\n            ",'\n                <span class="prco-valign-text-bottom-helper">\n                    ',"iconset/info_sign","medium","\n                </span>\n            ","\n        </div>\n        ",'\n            <input type="hidden" name="source_price" value="','" />\n        ',"\n    </div>\n\n    ",'\n        \n        <div id="hp-rt-reservation-summary-discount-breakdown-js" class="bui-panel bui-u-hidden prco-price-area-popover">\n            ',"\n    <div>\n        ",'\n            <div class="bui-grid">\n                <div class="bui-grid__column-7">\n                    <div class="bui-f-font-body prco-pop-breakdown-element">\n                        ','\n                    </div>\n                </div>\n\n                <div class="bui-grid__column-5">\n                    <div class="bui-f-font-body prco-pop-breakdown-element prco-text-nowrap-helper bui-u-text-right">\n                        ',"\n                    </div>\n                </div>\n            </div>\n\n            ",'\n                <div class="bui-grid">\n                    <div class="bui-grid__column-7">\n                        <div class="prco-pop-breakdown-element">\n                            <div class="bui-f-font-body">\n                                ','\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="bui-grid__column-5">\n                        <div class="bui-f-font-body prco-pop-breakdown-element prco-text-nowrap-helper bui-u-text-right">\n                            -&nbsp;',"\n                        </div>\n                    </div>\n                </div>\n\n                ",'\n                    <div class="bui-f-font-caption bui-f-color-grayscale bui-spacer--medium">\n                        ',"\n                    </div>\n                ","\n            ",'\n\n            \n            <div class="prco-pop-breakdown-element">\n                <hr class="bui-divider bui-divider--light" />\n            </div>\n        ','\n\n        <div class="bui-grid">\n            <div class="bui-grid__column-7">\n                <div class="bui-f-font-strong prco-pop-breakdown-element">\n                    ',"/private/sr_pd_breakdown_total/name",'\n                </div>\n            </div>\n\n            <div class="bui-grid__column-5">\n                <div class="bui-f-font-strong prco-pop-breakdown-element prco-text-nowrap-helper bui-u-text-right">\n                    ',"\n                </div>\n            </div>\n        </div>\n    </div>\n","\n        </div>\n    ","\n"],s=["has_discount","room_type_copy","total_price_before_discount","total_price","total_price_raw","is_rtb_property","before_discount_copy","all_discounts"];return _r_(function(r){_i_("a9a:7ad4808a");var e="",a=this.fn;return e+=_[0],a.MD(s[0])&&(e+=_[1]),e+=[_[2],a.MC(s[1]),_[3]].join(""),a.MD(s[0])&&(e+=[_[4],a.MC(s[2]),_[5]].join("")),e+=_[6],a.MD(s[0])&&(e+=_[7]),e+=[_[8],a.MC(s[3]),_[9]].join(""),a.MD(s[0])&&(e+=[_[10],(r.unshift({color:"#6B6B6B",name:_[11],size:_[12]}),t=a.HELPER("icon",r[0]),r.shift(),t),_[13]].join("")),e+=_[14],a.MD(s[5])&&(e+=[_[15],a.F.entities(a.MC(s[4])),_[16]].join("")),e+=_[17],a.MD(s[0])&&(e=function(e){if(_i_("a9a:930670d1"),e+=_[19],a.MJ(a.array_length(a.MB(s[7])))){e+=[_[20],a.MC(s[6]),_[21],a.MC(s[2]),_[22]].join("");var t=a.MC(s[7])||[];r.unshift({rate_discount:null});for(var o,n=1,i=t.length;n<=i;n++)r[0].rate_discount=o=t[n-1],e+=[_[23],a.F.entities((o||{}).b_copy),_[24],(o||{}).b_value_user_currency,_[25]].join(""),a.MJ(a.MG((o||{}).b_copy_alt))&&(e+=[_[26],a.F.entities((o||{}).b_copy_alt),_[27]].join("")),e+=_[28];r.shift(),e+=_[29]}return e+=[_[30],a.ME(_[31],a.MB,a.MN,null),_[32],a.MC(s[3]),_[33]].join(""),_r_(e)}(e+=_[18]),e+=_[34]),e+=_[35],_r_(e)})}()),B.define("component/hotel/new-rooms-table/highlighted-facilities",function(e,t,o){_i_("a9a:27039646");var n=e("component"),i=e("et");o.exports=n.extend({init:function(){_i_("a9a:3095e98d"),this.$otherFacilities=this.$el.find(".hprt-facilities-others"),this.$accessibleFacilities=this.$el.find(".hprt-accessible-facilities"),this.addEventListeners(),_r_()},addEventListeners:function(){_i_("a9a:52126e88");var o=this.$otherFacilities,t=this.$accessibleFacilities;this.$el.on("click","[data-toggler]",function(e){_i_("a9a:2e58d938"),e.preventDefault();var t=$(e.target);o.toggle("fast",function(){_i_("a9a:c4abb4cf"),o.is(":visible")?(i.goal("hp_room_facilities_more"),t.text(B.jstmpl.translations("hp_rt_info_collapse"))):(i.goal("hp_room_facilities_less"),t.text(B.jstmpl.translations("hp_rt_loc_more"))),_r_()}),_r_()}),this.$el.on("click","[data-toggler-accessibility]",function(e){_i_("a9a:6f884709"),e.preventDefault(),$(e.currentTarget).toggleClass("accordion-open",!t.is(":visible")),t.toggle("fast"),$(e.currentTarget).blur(),_r_()}),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/unit-reviews",function(e,t,o){_i_("a9a:498f2634");var n=e("component"),i=e("et");o.exports=n.extend({init:function(){_i_("a9a:72cf34bd"),this.$unitScores=this.$el.find(".rt-unit-review-score"),this.addEventListeners(),_r_()},addEventListeners:function(){_i_("a9a:860e23f3");var t,e=this.$unitScores;this.$el.on("mouseenter",e,function(e){_i_("a9a:946cad78"),t=setTimeout(function(){_i_("a9a:5960d72e"),i.customGoal("OOFHFfZHQFLFESFDMfQLEHSYO",1),clearTimeout(t),_r_()},2e3),_r_()}),this.$el.on("mouseleave",e,function(e){_i_("a9a:6ed1c005"),clearTimeout(t),_r_()}),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/select-error-tooltip",function(e,t,o){_i_("a9a:1d1a6f7f");var n=e("component"),i=e("jquery"),r=e("hotel/store"),a=e("hotel/redux/actionTypes");o.exports=n.extend({init:function(){_i_("a9a:c6dade78");var o=this.$el,n=i(".hprt-nos-select");o.attr("role","alert"),i("#hprt-form").submit(function(e){if(_i_("a9a:60172861"),!r.getState().roomsTable.js_selection.roomCount){e.preventDefault();var t=n.filter(function(e,t){return _i_("a9a:3b0d9f03"),_r_(60<t.getBoundingClientRect().top)}).get(0)||n.get(0);o.insertAfter(t),o.show().animate({opacity:1},600),i(".hprt-table-room-select").addClass("hprt-table-cell-select-error"),window.setTimeout(function(){_i_("a9a:f6e93812"),o.animate({opacity:0},600,function(){_i_("a9a:ae99e185"),o.hide(),_r_()}),_r_()},4e3),r.dispatch({type:a.SELECT_ROOM_ERROR}),i("select[name^='nr_rooms_']").attr("disabled",!1)}_r_()}),r.subscribe(function(){_i_("a9a:162f178a"),r.getState().roomsTable.js_selection.roomCount&&i(".hprt-table-cell-select-error").removeClass("hprt-table-cell-select-error"),_r_()}),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/select-rooms",function(e,t,o){_i_("a9a:63407ca5");var n=e("component"),u=e("hotel/redux/actionTypes"),b=e("et"),h=e("hotel/store"),f=e("hotel/new-rooms-table/fit-status-helper"),m=e("jquery"),v=B.env.room_symmetry_category_json||{},g=B.require("announce-to-screen-reader"),k=e("hotel/utils/rooms-selected-copy");o.exports=n.extend({init:function(){_i_("a9a:f343e5b7");var a=this.$el,_=a.data("room-id"),s=a.data("block-id"),l=a.parents("tr").find("td").not(":first"),c="radio"===a.attr("type")&&B.et.track("NAFLeOeJcCcCcCSYeJcJZXbSYWSGUQHMQMbZfWfBQVT"),e=h.getState().roomsTable.rooms,i={};if(e&&e.length)for(var t=1,o=0;o<e.length;o++){var n=e[o].b_blocks,r=e[o].b_id;if(n)for(var d=0;d<n.length;d++){var p=n[d].b_block_id;i[p]={roomId:r,position_overall:t,position_in_card:d},t++}}a.on("change",function(){var e;_i_("a9a:a85d58f9"),e="1"===a.attr("data-is-fflex-selected")?a.attr("data-other-block-id"):a.attr("data-block-id"),c?h.dispatch({type:u.SELECT_ROOM,block_id:e,number_of_rooms:1,is_fflex_selected:a.attr("data-is-fflex-selected"),should_overwrite_current_selection:!0}):h.dispatch({type:u.SELECT_ROOM,block_id:e,number_of_rooms:parseInt(a.val(),10),is_fflex_selected:a.attr("data-is-fflex-selected")}),1==B.env.b_is_group_search&&f.update();var t=h.getState().roomsTable.js_selection;g.announce(k(t.roomTypes,t.roomCount)+" "+t.totalPriceFormatted),l.find(".js-strikethrough-price").length&&b.goal("desktop_room_with_strikethrough_selected"),l.find(".c-deals-container").length&&b.goal("desktop_room_with_badge_selected");var o=h.getState().roomsTable.js_selection.blocks,n={};Object.keys(o).forEach(function(e){_i_("a9a:e3f8fe51");var t=i[e];t&&(n[e]={rt_selected_block_position_in_rt:t.position_overall,rt_selected_block_position_in_room_group:t.position_in_card,count:o[e].js_nr_selected,rt_room_symmetry_category:v[t.roomId]||""}),_r_()}),m("#hprt-form").find("input[name=rt_selected_blocks_info]").val(JSON.stringify(n)),_r_()}),h.subscribe(function(){_i_("a9a:b8a3c779");var e=h.getState().roomsTable.js_selection;0<e.roomCount?(b.goal("hp_room_select"),203==+B.env.b_acc_type&&b.goal("hp_hostel_room_select")):0<e.nrSelections&&(b.goal("hp_rt_room_deselect"),203==+B.env.b_acc_type&&b.goal("hp_rt_hostel_room_deselect")),s=a.attr("data-block-id");var t=e.blocks[s];if(c){var o=Boolean(t&&"number"==typeof t.js_nr_selected&&0<t.js_nr_selected);a.prop("checked",o)}t?(c||a.val(t.js_nr_selected),t.js_is_highlighted?l.addClass("hprt-block--room-selected"):l.removeClass("hprt-block--room-selected")):l.removeClass("hprt-block--room-selected");var n=e.rooms[_];if(n&&n.b_has_room_inventory){var i=0;i=c?a.is(":checked")?1:0:parseInt(a.val(),10);var r=parseInt(n.b_blocks[0].b_nr_stays,10)+i-e.roomCountPerRoomID[n.b_id];a.find("option").each(function(){_i_("a9a:3910e429"),m(this).prop("disabled",this.value>r),_r_()}),c||m(".js-group-recommendation-reserve-btn").attr("disabled",!0)}else a.find("option").each(function(){_i_("a9a:7e9fbdbc"),m(this).prop("disabled",!1),_r_()}),m(".js-group-recommendation-reserve-btn").attr("disabled",!1);_r_()}.bind(this)),_r_()}}),_r_()}),B.define("hotel/rooms-table",function(e){_i_("a9a:59a8ed24");var v=e("jquery"),g=e("hotel/store"),i=e("booking-sticker"),k=e("hotel/redux/actionTypes"),t=!1,r=!1;function o(){_i_("a9a:cfd21258");var e=new i,t=new i,o=new i,n={initialZIndex:180};B.env.b_hp_sticky_offset&&(n.initialOffset=B.env.b_hp_sticky_offset),B.events.once("fake-header-loaded",function(){_i_("a9a:9e0a1fba"),r||(r=!0,e.init(".hprt-table thead",".hprt-table",n),o.init(".fake-header.js-fake-header","#hprt-table",{noStacking:!0,initialZIndex:n.initialZIndex}),t.init(".js-hprt-reservation-summary > .reserve-block-js","#hprt-table",n)),_r_()}),_r_()}"hotel"===B.env.b_action&&B.env.b_bookings_owned&&B.env.b_rooms_available_and_soldout&&(0<v(".hprt-table tbody tr").length&&(o(),g.subscribe(function(){_i_("a9a:86af2c2c"),window.setTimeout(i.update,5),window.setTimeout(i.update,10),_r_()}),2===i.stickedElements.length&&(t=!0)),B.events.on("main-tab-opened",function(){_i_("a9a:8a28ab5f"),t||o(),_r_()})),e("hotel/rooms-table/reserve-button-tooltip"),e("hotel/rooms-table/filters/filters-handler"),v(".hprt-filter-button").click(function(e){_i_("a9a:735cd02e");var t=g.getState(),o=!1;v(this).hasClass("hprt-is-filter-clicked")?(v(this).removeClass("hprt-is-filter-clicked"),o=!0):v(this).addClass("hprt-is-filter-clicked");for(var n=0;n<t.roomsTable.rooms.length;n++)for(var i=t.roomsTable.rooms[n].b_blocks,r=0;r<i.length;r++)switch(v(this).attr("data-filter-type")){case"occupancy":v(this).attr("data-filter-value")!=i[r].b_max_persons&&v("[data-block-id='"+i[r].b_block_id+"']").each(function(e){_i_("a9a:bfc9090c"),o?v(this).find(".can-be-filtered").removeClass("hprt-greyout-occupancy"):v(this).find(".can-be-filtered").addClass("hprt-greyout-occupancy"),_r_()});break;case"meal":var a=v("#hprt-bundle-filter").attr("data-filters-applied")?v("#hprt-bundle-filter").attr("data-filters-applied").split(","):[];o?-1<(_=a.indexOf(v(this).attr("data-filter-value")))&&a.splice(_,1):a.includes(v(this).attr("data-filter-value"))||a.push(v(this).attr("data-filter-value")),0<a.length&&(!i[r].b_mealplan_included_name&&!a.includes("room")||i[r].b_mealplan_included_name&&!a.includes(i[r].b_mealplan_included_name))?v("[data-block-id='"+i[r].b_block_id+"']").each(function(e){_i_("a9a:bab5d2ba"),v(this).find(".can-be-filtered").addClass("hprt-greyout-meal"),_r_()}):v("[data-block-id='"+i[r].b_block_id+"']").each(function(e){_i_("a9a:4d016975"),v(this).find(".can-be-filtered").removeClass("hprt-greyout-meal"),_r_()}),v("#hprt-bundle-filter").attr("data-filters-applied",a.join());break;case"policy":var _;a=v("#hprt-bundle-filter").attr("data-policy-filters-applied")?v("#hprt-bundle-filter").attr("data-policy-filters-applied").split(","):[],o?-1<(_=a.indexOf(v(this).attr("data-filter-value")))&&a.splice(_,1):a.includes(v(this).attr("data-filter-value"))||a.push(v(this).attr("data-filter-value")),0<a.length&&("not_refundable_anymore"==i[r].b_cancellation_type&&!a.includes("non_refundable")||"not_refundable_anymore"!=i[r].b_cancellation_type&&!a.includes(i[r].b_cancellation_type))?v("[data-block-id='"+i[r].b_block_id+"']").each(function(e){_i_("a9a:37828a65"),v(this).find(".can-be-filtered").addClass("hprt-greyout-policy"),_r_()}):v("[data-block-id='"+i[r].b_block_id+"']").each(function(e){_i_("a9a:7aee62a9"),v(this).find(".can-be-filtered").removeClass("hprt-greyout-policy"),_r_()}),v("#hprt-bundle-filter").attr("data-policy-filters-applied",a.join())}_r_()}),v("#hprt-form").submit(function(e){var t;_i_("a9a:6c709ca8");var o=g.getState();if(!o.roomsTable.js_selection.roomCount||!o.roomsTable.rooms)return _r_();t=[];for(var n=[],i=0;i<o.roomsTable.rooms.length;i++){if(!o.roomsTable.rooms[i].b_blocks)return _r_();for(var r=-1,a=0;a<o.roomsTable.rooms[i].b_blocks.length;a++)o.roomsTable.js_selection.blocks[o.roomsTable.rooms[i].b_blocks[a].b_block_id]&&(r=a);o.roomsTable.rooms[i].b_blocks.some(function(e){return _i_("a9a:3e86e245"),_r_(o.roomsTable.js_selection.blocks[e.b_block_id])})&&t.push(i+1),-1!=r&&n.push(r+1)}var _=0,s=o.roomsTable.js_selection.blockIDs,l=o.roomsTable.js_selection;for(i=0;i<s.length;i++){var c=s[i],d=v("tr[data-block-id='"+c+"']").data("hotelRoundedPrice"),p=parseInt(d,10);if(isNaN(p))continue;_+=l.blocks[c].js_nr_selected*p}0<_&&v(this).find("input[name=rt_selected_total_price]").val(_);var u={},b=0;for(i=0;i<o.roomsTable.rooms.length;i++){if(!o.roomsTable.rooms[i].b_blocks)return _r_();for(r=-1,a=0;a<o.roomsTable.rooms[i].b_blocks.length;a++)u[o.roomsTable.rooms[i].b_blocks[a].b_block_id]=b,b++}var h=[],f=Object.keys(o.roomsTable.js_selection.blocks);for(i=0;i<f.length;i++){var m=u[f[i]];void 0!==m&&h.push(m+1)}0<h.length&&v(this).find("input[name=rt_selected_block_position]").val(h.join("_")),t.length&&v(this).find("input[name=rt_pos_selected]").val(t.join("_")),n.length&&v(this).find("input[name=rt_pos_selected_within_room]").val(n.join("_")),v("select[name^='nr_rooms_']").filter(function(){return _i_("a9a:f0558075"),_r_(0==v(this).val())}).attr("disabled",!0),g.dispatch({type:k.SUBMIT_FORM_WITH_ROOMS}),_r_()}),window.onpageshow=function(e){_i_("a9a:8b5d5ab1"),e.persisted&&(g.dispatch({type:k.RESET_SELECTION}),v("input[name=rt_selected_total_price]").val(""),v("input[name=rt_selected_block_position]").val(""),v("input[name=rt_pos_selected_within_room]").val(""),v("input[name=rt_pos_selected]").val(""),v('select[name^="nr_rooms_"]').filter(function(){return _i_("a9a:f05580751"),_r_(0==v(this).val())}).attr("disabled",!1)),_r_()},_r_()}),B.define("component/hotel/new-rooms-table/summary/genius-room-upgrade",function(e,t,o){_i_("a9a:69c9c2da");var n=e("component"),i=e("hotel/store");o.exports=n.extend({init:function(){_i_("a9a:f177a66f"),i.subscribe(function(){_i_("a9a:4659c403");var e=i.getState().roomsTable.js_selection,o=0,n=0;1<=e.roomCount?($.each(e.blocks,function(e,t){_i_("a9a:7e4b44ec"),t.b_genius_free_room_upgrade?o=1:n=1,_r_()}),o&&n?this.$el.html('<div class="urgency_message_red"><strong>'+B.jstmpl.translations("genius_free_room_upgrade_rt_multiple")+"</strong></div>"):this.$el.html("")):this.$el.html(""),_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/free-taxi",function(a,e,t){_i_("a9a:894ab8af");var o=a("component");t.exports=o.extend({init:function(){_i_("a9a:7d46933e");var e=this.$el.data(),o=+e.ttv,t=e.currencyCode,n=B.env.b_selected_currency,i=B.debug("trips_promotions");if(isNaN(o)||"string"!=typeof t||t.length<1||t!==n)return i.log(["Nothing to see here.","ttv = "+o,"currencyCode = "+t,"pageCurrencyCode = "+n].join(" ")),_r_();var r=a("hotel/store");r.subscribe(function(){_i_("a9a:8e107fb2");var e=r.getState().roomsTable.js_selection,t=e.totalPrice;o<t&&!function(e){_i_("a9a:a704e78d");var t=e.blockIDs[0]||"";return _r_(/^bbasic_/i.test(t))}(e)&&1<e.roomCount?this.$el.children().css("display","block").attr("aria-hidden","false"):this.$el.children().css("display","none").attr("aria-hidden","true"),_r_()}.bind(this)),_r_()}}),_r_()}),B.define("hotel/rooms-table/filters/filters-handler",function(e){_i_("a9a:d84e3e2f");var r,a=e("jquery"),_=e("hotel/store"),s=e("hotel/redux/actionTypes"),l=!1,c=a("#hprt-table"),d="bui-u-hidden";_.subscribe(function(){_i_("a9a:9123e36a");var e=_.getState().roomsTable;if(s.UPDATE_BLOCKS_FILTERS===e.lastAction){r=c.find(".js-rt-block-row");var t=e.filters.matchingBlocksIds,o=Object.values(e.js_selection.roomIDs);if(!o||!t.length)return r.removeClass(d),_r_();if(o&&o.length){var n=o.reduce(function(e,t){return _i_("a9a:03bfd822"),_r_(e.concat(function(t){_i_("a9a:a28242b9");var e=_.getState().roomsTable.rooms;if(!e)return _r_();return _r_(e.filter(function(e){return _i_("a9a:0cac6c46"),_r_(e.b_id===Number(t))}).reduce(function(e,t){return _i_("a9a:1540a307"),_r_(e.concat(t.b_blocks.map(function(e){return _i_("a9a:903b79da"),_r_(e.b_block_id)})))},[]))}(t)))},[]);t=t.concat(n)}var i=r.filter(function(){_i_("a9a:42c6f2db");var e=a(this).data("block-id");return _r_(-1===t.indexOf(e))});r.filter(function(){_i_("a9a:8f7b7679");var e=a(this).data("block-id");return _r_(0<=t.indexOf(e))}).removeClass(d),i.addClass(d)}else s.CLEAR_BLOCKS_FILTERS===e.lastAction?(r=c.find(".js-rt-block-row")).removeClass(d):s.ADD_TPI_ROOMS===e.lastAction&&(l||(l=!0));_r_()}),_r_()}),booking.jstmpl("rooms_table_unit_type_filter",function(){_i_("a9a:2f7b7425");var _=['\n    <div>\n        <div class="bui-group bui-group--inline bui-group--large" role="group">\n        ',"\n            ",'\n            <div class="bui-form__group">\n               <label class="bui-checkbox">\n                 <input\n                    type="checkbox"\n                    class="bui-checkbox__input js-hprt-filter-option"\n                    value="','"\n                    ',"checked",'\n                 />\n                 <span class="bui-checkbox__label">\n                   ',"\n                       ","/roomtype/{fe_unit_type_id}/filter_name_generic","\n                   ","/roomtype/{fe_unit_type_id}/filter_name","\n                 </span>\n               </label>\n            </div>\n        ","\n        </div>\n        ",'\n            <div class="rt-filter__clear-filters-banner">\n                ',"/private/bh_gwe_pp_rt_unit_type_filter_clear_banner/name",'\n                <a href="#" id="js-hprt-filter-clear-btn">\n                    ',"/private/bh_gwe_pp_rt_unit_type_filter_clear_banner_cta/name","\n                </a>\n            </div>\n        ","\n    </div>\n"],s=["filter_options","fe_filter_value","fe_filter_checked","selected_filters_count"];return _r_(function(e){_i_("a9a:84ca04c2");var t="",o=this.fn;t+=_[0];var n=o.MC(s[0])||[];e.unshift({fe_filter_option:null});for(var i,r=1,a=n.length;r<=a;r++)e[0].fe_filter_option=i=n[r-1],t+=_[1],o.MN("fe_unit_type_id",o.MG((i||{}).room_type_id)),t+=_[1],o.MN("fe_filter_value",o.MG((i||{}).value)),t+=_[1],o.MN("fe_filter_checked",o.MG((i||{}).selected)),t+=[_[2],o.F.entities(o.MC(s[1])),_[3]].join(""),o.MD(s[2])&&(t+=_[4]),t+=_[5],o.MJ(o.MB(s[1])+""=="room")?t+=[_[6],o.ME(_[7],o.MB,o.MN,null),_[8]].join(""):t+=[_[6],o.ME(_[9],o.MB,o.MN,null),_[8]].join(""),t+=_[10];return e.shift(),t+=_[11],o.MJ(0<o.MB(s[3]))&&(t+=[_[12],o.ME(_[13],o.MB,o.MN,null),_[14],o.ME(_[15],o.MB,o.MN,null),_[16]].join("")),t+=_[17],_r_(t)})}()),B.define("component/hotel/rooms-table/filters/unit-type",function(e,t,o){_i_("a9a:594f04a1");var _=e("jquery"),s=e("hotel/store"),l=e("hotel/redux/actionTypes"),n=[0,20,36,10,9,23,8,24,7,4,13];function i(e){var t;_i_("a9a:dd339d4a");var o={};for(t=0;t<e.length;t++){var n=e[t],i=n.b_blocks,r=n.b_roomtype_id,a=r;if(c(r)&&(a="room"),void 0===o[a]&&(o[a]={name:"unit-type-"+a,value:a.toString(),room_type_id:r,blocksIds:[],num_units:0,selected:!1}),i&&i.length){for(var _,s=0;s<i.length;s++)(_=i[s]).b_block_id&&o[a].blocksIds.push(_.b_block_id);n.isAvailable&&(o[a].num_units+=i[0].b_nr_stays)}}var l=Object.values(o);return l.sort(function(e,t){return _i_("a9a:ade9267b"),_r_(t.num_units-e.num_units)}),_r_(l)}function c(e){if(_i_("a9a:573896b0"),null===e)return _r_(!0);return _r_(-1!==n.indexOf(e))}o.exports=e("component/reactive").extend({template:"rooms_table_unit_type_filter",initialState:{filter_options:[],selected_filters_count:0},initialize:function(){_i_("a9a:cf8a8dd6");var e=i(s.getState().roomsTable.rooms);this.setState({filter_options:e}),this.$el.on("change",".js-hprt-filter-option",this._handleFilterOptionChange.bind(this)),this.$el.on("click","#js-hprt-filter-clear-btn",this._handleClearFilterClicked.bind(this)),s.subscribe(this._onHotelPageStoreChange.bind(this)),_r_()},_onHotelPageStoreChange:function(){_i_("a9a:90c5f5fe");var e=s.getState().roomsTable;if(l.ADD_TPI_ROOMS===e.lastAction){var t=i(e.rooms);this.setState({filter_options:t})}_r_()},_handleFilterOptionChange:function(e){_i_("a9a:20bcc6c4");var t=_(e.target),o=t.val(),n=t.is(":checked"),i=[],r=[],a=this.getState().filter_options.map(function(e){return _i_("a9a:8ef33fa3"),e.value===o&&(e.selected=n),e.selected&&(i=i.concat(e.blocksIds),r.push(e.name)),_r_(e)});s.dispatch({type:l.UPDATE_BLOCKS_FILTERS,selectedFilters:r,matchingBlocksIds:i}),this.setState({filter_options:a,selected_filters_count:r.length}),_r_()},_handleClearFilterClicked:function(e){_i_("a9a:f8fad248"),e.preventDefault(),s.dispatch({type:l.CLEAR_BLOCKS_FILTERS});var t=i(s.getState().roomsTable.rooms);this.setState({filter_options:t,selected_filters_count:0}),_r_()}}),_r_()}),B.when({action:"hotel",condition:"string"==typeof B.env.fe_rt_select_first_room&&0<B.env.fe_rt_select_first_room.length,experiment:"NAFLeOeJcCcCcCSYeJcJZXbSYWSGUQHMQMbZfWfBQVT",events:"ready"}).run(function(e){_i_("a9a:04dd0475");var t=e("hotel/redux/actionTypes");e("hotel/store").dispatch({type:t.SELECT_ROOM,block_id:B.env.fe_rt_select_first_room,number_of_rooms:1,is_fflex_selected:void 0,is_replace:!0}),_r_()}),B.require("hotel/rooms-table"),_r_();