var _i_=this._i_||function(){},_r_=this._r_||function(_){return _};B.define("booking-process/MFE/events",function(_,e,t){_i_("74b:c62b4c47");var r="CAPLA_EVENT_checkout_bp-accommodation_",n={CREATE_BASKET_REQUEST:r+"BASKET_INTEGRATOR_CREATE_BASKET_REQUEST",BASKET_CREATED:r+"BASKET_INTEGRATOR_BASKET_CREATED"},a={LOADING:r+"PROPERTY_DETAILS_LOADING",LOADED:r+"PROPERTY_DETAILS_LOADED",ERROR:r+"PROPERTY_DETAILS_ERROR",NO_DATA:r+"NO_DATA"},i={LOADED:r+"PRICE_MATCH_LOADED",NOT_ELIGIBLE:r+"PRICE_MATCH_NOT_ELIGIBLE",MODAL_OPEN:r+"PRICE_MATCH_MODAL_OPEN"},o={VALIDATION_REQUEST:r+"VALIDATION_REQUEST",VALIDATION_FORM_VALID:r+"VALIDATION_FORM_VALID",VALIDATION_FORM_INVALID:r+"VALIDATION_FORM_INVALID",VALIDATION_FORM_ERROR:r+"VALIDATION_FORM_ERROR",VALIDATION_FORM_TIMEOUT:r+"VALIDATION_FORM_TIMEOUT"};t.exports={BASKET_INTEGRATOR:n,PROPERTY_DETAILS:a,PRICE_MATCH:i,USER_DETAILS:o},_r_()}),B.define("component/booking-process/basket-integrator",function(_,e,t){"use strict";_i_("74b:09036be1");var n,r,a=_("component"),i=_("server-data"),o=_("with-capla"),E=_("booking-process/MFE/events"),A=_("report-error"),c="mdot"===i.b_site_type,T="checkout",s="bp-accommodation",I="select.bui-form__control",R='input[type="range"].bui-stepper__input',b=!1;function O(_){if(_i_("74b:d954d856"),!_||!_.dataStore)return A(new Error("caplaObject undefined for basket creation"),"[ABU Booking Process] Basket Integrator - Unable to load Capla store to create basket."),_r_();_.eventBus.subscribe(E.BASKET_INTEGRATOR.BASKET_CREATED,function(_,e){_i_("74b:f6dc6363");var t=n.attr("action");if(-1===t.indexOf("basket_id")){var r=e.basketId;n.attr("action",t+"&basket_id="+r),b=!0}n.submit(),_r_()}),_r_()}function d(_,e){_i_("74b:2fd0321f");var t=_.eventBus,r={selection:function(){_i_("74b:676ae084");var t={},_=$(c?R:I);return _.length&&_.each(function(){_i_("74b:add8aec8");var _=$(this).attr("name"),e=$(this).val();t[_]=parseInt(e),_r_()}),_r_(t)}(),checkinDate:i.b_checkin_date_ymd,checkoutDate:i.b_checkout_date_ymd,searchConfig:{b_adults_total:i.b_search_config?i.b_search_config.b_adults_total:0,b_children_ages_total:i.b_search_config?i.b_search_config.b_children_ages_total:[]},aid:parseInt(i.b_aid,10),label:i.b_label,hotelId:parseInt(i.b_hotel_id,10),channelId:parseInt(i.b_partner_channel_id,10)};t.publish(E.BASKET_INTEGRATOR.CREATE_BASKET_REQUEST,r),_r_()}var u={init:function(){if(_i_("74b:a13529f8"),n=$("#bookForm"),r=n.find(".bp-select-no-rooms__cta"),!n||!r)return _r_();n.on("submit",function(_){if(_i_("74b:5c5658e2"),!b)return _.preventDefault(),_r_(!1);return _r_(!0)}),this.registerHandlers(),o(T,s,O)(),_r_()},registerHandlers:function(){if(_i_("74b:5d80162d"),!n)return _r_();n.on("submit",o(T,s,d)),_r_()}};t.exports=a.extend(u),_r_()});